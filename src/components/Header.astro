---
---

<nav 
  class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/80 backdrop-blur-md supports-[backdrop-filter]:bg-background/60 transition-all duration-300 data-[scrolled=true]:bg-bg-2 data-[scrolled=true]:border-border"
  aria-label="Main navigation"
>
  <div class="mx-auto max-w-7xl px-4 lg:px-6">
    <div class="flex h-16 items-center justify-between">
      <a href="/" class="flex items-center space-x-3 group" aria-label="Homepage">
        <img 
          src="/logos/de-logo.avif" 
          alt="KI Automatisieren Logo" 
          width="80"
          height="80"
          class="h-20 w-auto transition-all duration-300 group-hover:scale-105"
        />
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex md:items-center md:space-x-8">
        {
            [
                { href: '/', label: 'Startseite' },
                { href: '/fallstudien', label: 'Fallstudien' },
                { href: '/blog', label: 'Blog' },
            ].map(item => (
                <a
                    href={item.href}
                    class:list={[
                        "text-sm font-medium transition-colors lime-underline focus-lime relative",
                        Astro.url.pathname === item.href || (item.href !== '/' && Astro.url.pathname.startsWith(item.href)) 
                            ? "text-lime-400" 
                            : "text-white hover:text-lime-400"
                    ]}
                >
                    {item.label}
                    {(Astro.url.pathname === item.href || (item.href !== '/' && Astro.url.pathname.startsWith(item.href))) && (
                        <div class="absolute -left-2 top-1/2 -translate-y-1/2 lime-dot"></div>
                    )}
                </a>
            ))
        }
        
        <!-- Solutions Dropdown -->
        <div class="relative group">
          <button 
            class:list={[
                "text-sm font-medium transition-colors lime-underline focus-lime relative inline-flex items-center gap-1",
                Astro.url.pathname.includes('/losungen') ? "text-lime-400" : "text-white hover:text-lime-400"
            ]}
          >
            Lösungen
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3"><path d="m6 9 6 6 6-6"/></svg>
            {Astro.url.pathname.includes('/losungen') && (
                 <div class="absolute -left-2 top-1/2 -translate-y-1/2 lime-dot"></div>
            )}
          </button>
          
          <div class="absolute left-0 mt-2 w-56 rounded-md border border-border bg-background p-2 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[60]">
            <a href="/losungen/leadgenerierung-ki" class="block rounded-md px-4 py-2 text-sm text-gray-300 hover:text-lime-400 transition-colors w-full">KI Leadgenerierung</a>
            <a href="/losungen/marketing-automatisierung" class="block rounded-md px-4 py-2 text-sm text-gray-300 hover:text-lime-400 transition-colors w-full">Marketing Automatisierung</a>
            <a href="/losungen/vertriebsautomatisierung" class="block rounded-md px-4 py-2 text-sm text-gray-300 hover:text-lime-400 transition-colors w-full">Vertriebsautomatisierung</a>
            <a href="/losungen/crm-prozessautomatisierung" class="block rounded-md px-4 py-2 text-sm text-gray-300 hover:text-lime-400 transition-colors w-full">CRM Automatisierung</a>
            <a href="/losungen/kundenservice-automatisierung" class="block rounded-md px-4 py-2 text-sm text-gray-300 hover:text-lime-400 transition-colors w-full">Kundenservice Automatisierung</a>
            <a href="/strategieberatung-ki-sales-marketing" class="block rounded-md px-4 py-2 text-sm text-gray-300 hover:text-lime-400 transition-colors w-full">KI Strategieberatung</a>
            <div class="my-1 border-t border-border"></div>
            <a href="/losungen" class="block rounded-md px-4 py-2 text-sm font-semibold text-white hover:text-lime-400 transition-colors w-full">Alle Lösungen →</a>
          </div>
        </div>
      </div>

      <!-- Mobile Navigation -->
      <div class="md:hidden" x-data="{ open: false }">
        <button @click="open = !open" class="p-2 text-white hover:text-lime-400 focus-lime rounded-md" aria-label="Toggle menu">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
        </button>
        
        <div 
            x-show="open" 
            @click.outside="open = false" 
            x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 translate-x-10"
            x-transition:enter-end="opacity-100 translate-x-0"
            class="fixed inset-y-0 right-0 w-[300px] bg-background border-l border-border p-6 shadow-2xl z-[60] flex flex-col gap-6"
            style="display: none;"
        >
            <div class="flex items-center justify-between mb-2">
                <a href="/" @click="open = false">
                    <img src="/logos/de-logo.avif" alt="Logo" width="64" height="64" class="h-16 w-auto" />
                </a>
                <button @click="open = false" class="text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 18 12"/></svg>
                </button>
            </div>
            
            <nav class="flex flex-col space-y-2">
                {
                    [
                        { href: '/', label: 'Startseite' },
                        { href: '/fallstudien', label: 'Fallstudien' },
                        { href: '/blog', label: 'Blog' },
                        { href: '/losungen', label: 'Lösungen' },
                    ].map(item => (
                        <a 
                            href={item.href}
                            class:list={[
                                "block rounded-md px-3 py-2 text-sm transition-colors hover:bg-white/5",
                                Astro.url.pathname === item.href 
                                    ? "bg-white/5 text-lime-400 border-l-2 border-lime-400" 
                                    : "text-white"
                            ]}
                        >
                            {item.label}
                        </a>
                    ))
                }
            </nav>
        </div>
      </div>
    </div>
  </div>
</nav>
